{% with id=widget.attrs.id %}
    <div {% if id %}id="{{ id }}"{% endif %}>
        <ul {% if widget.attrs.classList %}class="{{ widget.attrs.classList }}"{% endif %}>
            {% for group, options, index in widget.optgroups %}
                {% if group %}
                    <li>
                        {{ group }}
                        <ul {% if id %}id="{{ id }}_{{ index }}"{% endif %}>
                        {% endif %}
                        {% for option in options %}
                            <li>
                                <div class="form-check">
                                    {% include "django/forms/widgets/input.html" with widget=option %}
                                    <label {% if option.attrs.id %}for="{{ option.attrs.id }}"{% endif %}
                                           class="form-check-label">{{ option.label }}</label>
                                </div>
                            </li>
                        {% endfor %}
                        {% if group %}
                        </ul>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
{% endwith %}
